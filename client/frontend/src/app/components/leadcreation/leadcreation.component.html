
<app-header></app-header>

<div class="container">
  <div class="main">
    <form [formGroup]="leadForm" (ngSubmit)="onSubmit()">
    <div class="lead_heading">
     <h2>New Lead Form</h2>
    </div>

    <div class="type_insurance">
      <label for="insurance">Type of Insurance </label><br>
      <input type="radio"  id="individual" value="individual"  formControlName="insurance_type"/>Individual
      <input type="radio"  id="non-individual" value="non-individual"  formControlName="insurance_type"/>Non-Individual
    </div>

    <div class="personal_details">
      <h2>Personal Details</h2>
    </div>

    <div class="form_fields"> 
      <div class="user_details">
        <div class="user_inputs">
          <label for="first_name">Firstname</label><br>
          <input type="text"  id="first_name"  formControlName="first_name" placeholder="Name should match with the name as per ID proof submitted" />
           <div *ngIf="leadForm.controls['first_name'].dirty  && leadForm.hasError('required','first_name')" class="validationError">
            First name cannot be empty.
          </div>
          <div *ngIf="leadForm.controls['first_name'].dirty  && leadForm.hasError('pattern','first_name') && !firstNameMiddleNameDuplicate && !firstNameLastNameDuplicate" class="validationError">
            Please use text and ' or - only.
          </div>
          <div *ngIf="firstNameMiddleNameDuplicate" class="validationError">
            First name and Middle name can not be same.
          </div>
          <div *ngIf="firstNameLastNameDuplicate" class="validationError">
            First name and Last name can not be same.
          </div>
        </div>
      <div class="user_inputs">
        <label for="middle_name">MiddleName</label><br>
        <input type="text"  id="middle_name" formControlName="middle_name" placeholder="Name should match with the name as per ID proof submitted"
        />
        <div *ngIf="leadForm.controls['middle_name'].dirty  && leadForm.hasError('pattern','middle_name') && !firstNameMiddleNameDuplicate && !middleLastNameDuplicate" class="validationError">
          Please use text and ' or - only.
        </div>
        <div *ngIf="firstNameMiddleNameDuplicate" class="validationError">
          First name and Middle name can not be same.
        </div>
        <div *ngIf="middleLastNameDuplicate" class="validationError">
          Middle name and Last name should not be the same.
        </div>

      </div>
      <div class="user_inputs">
        <label for="last_name">LastName</label><br>
        <input type="text"  id="last_name" formControlName="last_name" placeholder="Name should match with the name as per ID proof submitted"/>
         <div *ngIf="leadForm.controls['last_name'].dirty  && leadForm.hasError('required','last_name')" class="validationError">
          Last name cannot be empty.
        </div>
        <div *ngIf="leadForm.controls['last_name'].dirty  && leadForm.hasError('pattern','last_name') && !firstNameLastNameDuplicate && !middleLastNameDuplicate" class="validationError">
          Please use text and ' or - only.
        </div>
        <div *ngIf="firstNameLastNameDuplicate" class="validationError">
          First name and Last name can not be same.
        </div>
        <div *ngIf="middleLastNameDuplicate" class="validationError">
          Last name and Middle name can not be same.
        </div>
      </div>
      </div>


      <div class="user_details">
        <div class="user_inputs_radio">
          <label for="gender">Gender</label><br>
          <div class="amount_radio">
            <label class="radio_container">
              <input type="radio"  value="male" formControlName="gender" >
              <span class="checkmark"></span>
                <div class="checkmark_one">
                  Male
                </div>
            </label>
            <label class="radio_container">
              <input type="radio"  value="female" formControlName="gender" >
              <span class="checkmark"></span>
                <div class="checkmark_one">
                  Female
                </div>
            </label>
            <label class="radio_container">
              <input type="radio"  value="transgender" formControlName="gender" >
              <span class="checkmark"></span>
                <div class="checkmark_one">
                  Transgender
                </div>
            </label>
          </div>
           <div *ngIf="leadForm.controls['gender'].dirty  && leadForm.hasError('required','gender')" class="validationError">
            Please select a gender.
          </div>
        </div>
        <div class="user_inputs">
          <label for="dob">Date of Birth</label><br>
          <input type="text"
          class="form-control"
          placeholder="DD-MM-YYYY"
          bsDatepicker
          [bsConfig]="datePickerConfig"  formControlName="dob" >
          <div *ngIf="leadForm.controls['dob'].dirty  && leadForm.hasError('required','dob')" class="validationError">
            Please select a date.
          </div>
        </div>
        </div>

        <div class="user_details">
          <div class="user_inputs_radio">
            <label for="marital_status">Marital Status</label><br>
            <div class="amount_radio">
              <label class="radio_container">
                <input type="radio"  value="single" formControlName="marital_status" >
                <span class="checkmark"></span>
                  <div class="checkmark_one">
                    Single
                  </div>
              </label>
              <label class="radio_container">
                <input type="radio"  value="married" formControlName="marital_status" >
                <span class="checkmark"></span>
                  <div class="checkmark_one">
                    Married
                  </div>
              </label>
              <label class="radio_container">
                <input type="radio"  value="divorced" formControlName="marital_status" > 
                <span class="checkmark"></span>
                  <div class="checkmark_one">
                    Divorced
                  </div>
              </label>
              <label class="radio_container">
                <input type="radio"  value="widowed" formControlName="marital_status" >
                <span class="checkmark"></span>
                  <div class="checkmark_one">
                    Widowed
                  </div>
              </label>
              <label class="radio_container">
                <input type="radio"  value="unmarried" formControlName="marital_status" >
                <span class="checkmark"></span>
                  <div class="checkmark_one">
                    Unmarried
                  </div>
              </label>
          </div>
          <div *ngIf="leadForm.controls['marital_status'].dirty  && leadForm.hasError('required','marital_status')" class="validationError">
            Please select a Marital Status.
          </div>
          </div>
          </div>


        <div class="user_details">
          <div class="user_inputs">
            <label for="resident_status">Resident Status</label><br>
            <select  formControlName="resident_status">
              <option value="resident_indian" selected>Resident Indian</option>
              <option value="non_resident_indian" >Non Resident Indian</option>
              <option value="overseas_citizen_india" >Overseas Citizen of India</option>
              <option value="person_of_indian_origin" >Person of India Origin</option>
            </select>
          </div>
        </div>

        <div class="lead_after_resident">
          <h2>Lead Details</h2>
        </div>

        <div class="user_details">
          <div class="user_inputs">
            <label for="disposition">Disposition</label><br>
            <select  formControlName="disposition">
              <option value="follow_up">Follow-UP</option>
              <option value="negative_closure" >Negative Closure</option>
              <option value="invalid" >Invalid</option>
              <option value="hibernate" >Hibernate</option>
              <option value="new_status_dispsition" selected>New Status</option>
            </select>
          </div>

          <div class="user_inputs">
            <label for="sub_disposition">Sub-Disposition</label><br>
            <select  formControlName="sub_disposition">
              <option value="new_status_sub_disposition" selected>New Status</option>
            </select>
          </div>
        </div>

        <div class="lead_after_resident">
          <h2>Communication Details</h2>
        </div>

        <div class="user_details">
          <div class="user_inputs">
            <label for="address">Address</label><br>
            <input type="text"  id="address" formControlName="address"  /> 
            <div *ngIf="leadForm.controls['address'].dirty  && leadForm.hasError('required','address')" class="validationError">
              Address Line cannot be empty.
            </div>
          </div>

          <div class="user_inputs">
            <label for="landmark">Landmark</label><br>
            <input type="text"  id="landmark" formControlName="landmark" /> 
            <div *ngIf="leadForm.controls['landmark'].dirty  && leadForm.hasError('required','landmark')" class="validationError">
              Landmark cannot be empty.
            </div>
          </div>

          <div class="user_inputs">
            <label for="country">Country</label><br>
            <input type="text" value="India"  formControlName="country" readonly/>
            <!-- <select   (change)="onCountryChange($event)" formControlName="country" 
              [(ngModel)]="country" >
              <option value="" disabled  selected></option>
              <option  [value]="countryData.short_name"  *ngFor="let countryData of countryDropDownData" selected>{{countryData.name}}</option>
            </select> -->
            <!-- <div *ngIf="submitted && leadForm.invalid"  class="validationError">Please select a country.</div> -->
            <!-- <div *ngIf="leadForm.controls['landmark'].dirty  && leadForm.hasError('required','landmark')" class="validationError">
              Please select a country.
            </div> -->
            
          </div>


        </div>
        <div class="user_details">
          <div class="user_inputs">
            <label for="state">State</label><br>
            <select   (change)="onStateChange($event)" formControlName="state" [disabled]="!leadForm.country"
            [(ngModel)]="state" >
              <option value="" disabled  selected></option>
              <!-- <option [value]="stateData.name" [id]="stateData.country_short_name" *ngFor="let stateData of stateDataFromCountry">{{stateData.name}}</option> -->
              <option [value]="stateData.state_name"  *ngFor="let stateData of stateDataFromCountry">{{stateData.name}}</option>
            </select>
            <!-- <div *ngIf="submitted && leadForm.invalid"  class="validationError">Please select a state.</div> -->
            <div *ngIf="leadForm.controls['state'].dirty  && leadForm.hasError('required','state')" class="validationError">
              Please select a state.
            </div>
          </div>

          <div class="user_inputs">
            <label for="city">City</label><br>
            <select formControlName="city"  [(ngModel)]="city" >
              <option value="" disabled  selected></option>
              <option [value]="cityData.name" *ngFor="let cityData of cityDataFromState">{{cityData.name}}</option>
            </select>
            <div *ngIf="leadForm.controls['city'].dirty  && leadForm.hasError('required','city')" class="validationError">
              Please select a city.
            </div>
          </div> 
        </div>

        <div class="user_details">
        <div class="user_inputs">
          <label for="pincode">Pincode</label><br>
          <input type="text"  id="pincode" formControlName="pincode"  /> 
          <div *ngIf="leadForm.controls['pincode'].dirty  && leadForm.hasError('required','pincode')" class="validationError">
            Please enter a Pin Code.
          </div>
        </div>  
        </div>
        
        <div class="user_details">
        <div class="user_inputs">
          <label for="email">Email</label><br>
          <input type="email"  id="email" formControlName="email" />
          <div *ngIf="leadForm.controls['email'].dirty  && leadForm.hasError('required','email')" class="validationError">
            Email cannot be empty.
          </div>
          <div *ngIf="leadForm.controls.email.touched && leadForm.controls.email.errors?.pattern" class="validationError">
            Please enter a valid email-id.</div>
        </div>
        <div class="user_inputs">
          <label for="mobile">Mobile</label><br>
          <input type="text"  id="mobile" formControlName="mobile" 
           maxlength="10"  />
           <div *ngIf="leadForm.controls['mobile'].dirty  && leadForm.hasError('required','mobile')" class="validationError">
            Mobile number cannot be empty.
          </div>
          <div *ngIf="leadForm.controls.mobile.touched && leadForm.controls.mobile.errors?.pattern" class="validationError">
            Please enter a ten digit mobile number starting with 6, 7, 8 or 9.</div>
        </div>
      </div>

      <div class="lead_after_resident">
        <h2>Other Details</h2>
      </div>

      <div class="user_inputs">
        <label for="agent_state">Agent Servicing State</label><br>
        <select  formControlName="agent_servicing_state" (change)="onStateChange($event)" >
          <option value="" disabled  selected></option>
          <option [value]="stateIndiaDataOnly.name" [id]="stateIndiaDataOnly.state_name" *ngFor="let stateIndiaDataOnly of getStatesDropFromIndia">{{stateIndiaDataOnly.name}}</option>
        </select>
        <div *ngIf="leadForm.controls['agent_servicing_state'].dirty  && leadForm.hasError('required','agent_servicing_state')" class="validationError">
          Please select a state.
        </div>
      </div>
        </div>

    <div class="save_procced">
      <button class="btn btn-primary">Save & Procced</button>
    </div>
  </form>
  </div>
</div>
